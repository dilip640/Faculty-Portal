{{define "title"}}CV | Edit{{end}}
{{define "content"}}
<style>
    p:empty:not(:focus)::before {
        content: attr(data-placeholder);
    }
</style>
{{template "cv_template" .}}
{{end}}
{{define "js"}}
<script>
    function saveBio() {
        senddata({ 'biography': $('#bio').text() });
    }
    function saveAbout() {
        senddata({ 'aboutme': $('#about').text() });
    }

    function addProject() {
        var formdata = $('#prform').serializeArray();
        senddata({
            'project': {
                'title': formdata[0].value,
                'detail': formdata[1].value,
            }
        });
        return false;
    }

    function senddata(data) {
        $(this).prop('disabled', true);
        $('#alertbox').show().html('saving..');
        var jsondata = JSON.stringify(data);
        $.ajax({
            type: 'POST',
            url: '/faculty/editcv',
            data: jsondata,
            success: function (msg) {
                $('#alertbox').show().html('changes saved');
            },
            error: function (e) {
                $('#alertbox').show().html('error saving');
            }
        });
    }
</script>
{{end}}